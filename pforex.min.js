Pforex={base:"USD",current:"EUR",version:"0.3",init:function(){this.mkSelector();var e=function(e,t){function r(e){var t=new RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}var o=r("currency");o&&Pforex.currencies[o]?Pforex.set(o):void 0!==Cookies.get("pforex")?Pforex.set(Cookies.get("pforex")):Pforex.set("USD"),Pforex.update(),Pforex.watch()};this.data(e,e)},watch:function(){var e=this,t=new MutationObserver(function(t){t.forEach(function(t){e.render(t.target)})}),r=function(e){t.observe(e,{attributes:!0})};Q("[data-pforex-price]").forEach(r),Q("pforex").forEach(r)},render:function(e){var t=Pforex,r=parseInt(e.getAttribute("price")||e.getAttribute("data-pforex-price"));r=r*t.rates[t.base]/t.rates[t.current];var o=t.currencies[t.current].decimals;r=Math.round(r/100*Math.pow(10,o))/Math.pow(10,o),r=t.separate(r,t.currencies[t.current]);var n="";"false"!==(e.getAttribute("show-symbol")||e.getAttribute("data-pforex-show-symbol"))&&(n+=t.currencies[t.current].symbol),"NaN"!==r&&(n+=r),"true"===(e.getAttribute("show-currency")||e.getAttribute("data-pforex-show-currency"))&&(n=n.length>=0?n+" "+Pforex.current:Pforex.current);var c=e.getAttribute("re")||e.getAttribute("data-pforex-re");if(0===e.innerHTML.length||null===c)e.innerHTML=n;else{for(var a=e.innerHTML,i=RegExp(c,"g"),s=i.exec(a);null!==s&&s.length>1;)a=a.replace(s[1],n),s=i.exec(a);e.innerHTML=a}},update:function(){Q("pforex").forEach(Pforex.render),Q("[data-pforex-price]").forEach(Pforex.render),Q("select[pforex-selector]").forEach(function(e){e.value=Pforex.current})},mkSelector:function(){Q("select[pforex-selector]").forEach(function(e){e.onchange=function(e){Pforex.set(e.target.value)}})},set:function(e){void 0!==Pforex.currencies[e]?Pforex.current=e:console.log("Attempting to set unknown currency:",e),Cookies.set("pforex",Pforex.current),Pforex.update()},get:function(){return Pforex.current},data:function(cb,err){var xhr=new XMLHttpRequest;xhr.open("GET","//cdn.shopify.com/s/javascripts/currencies.js"),xhr.onload=function(){return 200===xhr.status?(eval(xhr.responseText),Pforex.rates=Currency.rates,!!cb&&cb()):(console.log("Pforex could not load currency data:",xhr),!!err&&err())},xhr.send()},separate:function(e,t){function r(e){var r=e.toString().split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,t.thousandSep),r.join(t.decimalSep)}return r(e)},currencies:{USD:{symbol:"$",decimals:2,thousandSep:",",decimalSep:"."},CAD:{symbol:"$",decimals:2,thousandSep:",",decimalSep:"."},EUR:{symbol:"&euro;",decimals:2,thousandSep:",",decimalSep:"."},AUD:{symbol:"$",decimals:2,thousandSep:" ",decimalSep:"."},NZD:{symbol:"$",decimals:2,thousandSep:",",decimalSep:"."},JPY:{symbol:"&#165;",decimals:0,thousandSep:",",decimalSep:"."},GBP:{symbol:"&pound;",decimals:2,thousandSep:",",decimalSep:"."},INR:{symbol:"₹",decimals:2,thousandSep:",",decimalSep:"."},SGD:{symbol:"$",decimals:2,thousandSep:",",decimalSep:"."},MYR:{symbol:"RM",decimals:2,thousandSep:",",decimalSep:"."},SAR:{symbol:"﷼",decimals:2,thousandSep:",",decimalSep:"."},AED:{symbol:"د.إ",decimals:2,thousandSep:",",decimalSep:"."},SEK:{symbol:"kr",decimals:2,thousandSep:" ",decimalSep:","},NOK:{symbol:"kr",decimals:2,thousandSep:".",decimalSep:","},DKK:{symbol:"kr",decimals:2,thousandSep:".",decimalSep:","},CLP:{symbol:"$",decimals:0,thousandSep:".",decimalSep:"."},MXN:{symbol:"$",decimals:2,thousandSep:",",decimalSep:"."},BRL:{symbol:"$",decimals:2,thousandSep:".",decimalSep:","},ILS:{symbol:"₪",decimals:2,thousandSep:",",decimalSep:"."}}};var Q=function(e){return document.querySelectorAll(e)};!function(e,t){"use strict";var r=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var r=function(e,t,o){return 1===arguments.length?r.get(e):r.set(e,t,o)};return r._document=e.document,r._cacheKeyPrefix="cookey.",r._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),r.defaults={path:"/",secure:!1},r.get=function(e){r._cachedDocumentCookie!==r._document.cookie&&r._renewCache();var o=r._cache[r._cacheKeyPrefix+e];return o===t?t:decodeURIComponent(o)},r.set=function(e,o,n){return n=r._getExtendedOptions(n),n.expires=r._getExpiresDate(o===t?-1:n.expires),r._document.cookie=r._generateCookieString(e,o,n),r},r.expire=function(e,o){return r.set(e,t,o)},r._getExtendedOptions=function(e){return{path:e&&e.path||r.defaults.path,domain:e&&e.domain||r.defaults.domain,expires:e&&e.expires||r.defaults.expires,secure:e&&e.secure!==t?e.secure:r.defaults.secure}},r._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},r._getExpiresDate=function(e,t){if(t=t||new Date,"number"==typeof e?e=e===1/0?r._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!r._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},r._generateCookieString=function(e,t,r){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),r=r||{};var o=e+"="+t;return o+=r.path?";path="+r.path:"",o+=r.domain?";domain="+r.domain:"",o+=r.expires?";expires="+r.expires.toUTCString():"",o+=r.secure?";secure":""},r._getCacheFromString=function(e){for(var o={},n=e?e.split("; "):[],c=0;c<n.length;c++){var a=r._getKeyValuePairFromCookieString(n[c]);o[r._cacheKeyPrefix+a.key]===t&&(o[r._cacheKeyPrefix+a.key]=a.value)}return o},r._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var r,o=e.substr(0,t);try{r=decodeURIComponent(o)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+o+'"',e)}return{key:r,value:e.substr(t+1)}},r._renewCache=function(){r._cache=r._getCacheFromString(r._document.cookie),r._cachedDocumentCookie=r._document.cookie},r._areEnabled=function(){var e="cookies.js",t="1"===r.set(e,1).get(e);return r.expire(e),t},r.enabled=r._areEnabled(),r},o=e&&"object"==typeof e.document?r(e):r;"function"==typeof define&&define.amd?define(function(){return o}):"object"==typeof exports?("object"==typeof module&&"object"==typeof module.exports&&(exports=module.exports=o),exports.Cookies=o):e.Cookies=o}("undefined"==typeof window?this:window),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t,r;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),n=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),r=0;r<n;){var c;r in o&&(c=o[r],e.call(t,c,r,o)),r++}}),document.querySelectorAll||(document.querySelectorAll=function(e){var t=document,r=t.documentElement.firstChild,o=t.createElement("STYLE");return r.appendChild(o),t.__qsaels=[],o.styleSheet.cssText=e+"{x:expression(document.__qsaels.push(this))}",window.scrollBy(0,0),t.__qsaels}),Pforex.init();
